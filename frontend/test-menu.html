<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Menu API</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1200px; margin: 50px auto; padding: 20px; }
        .section { background: #f5f5f5; padding: 20px; margin: 20px 0; border-radius: 8px; }
        h2 { color: #333; }
        button { padding: 10px 20px; margin: 5px; background: #D4AF37; color: white; border: none; cursor: pointer; border-radius: 4px; }
        button:hover { background: #C19B2B; }
        .result { background: #fff; padding: 15px; margin-top: 10px; border-radius: 4px; border: 1px solid #ddd; }
        .menu-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; margin-top: 20px; }
        .menu-item { background: white; padding: 15px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .menu-item img { width: 100%; height: 200px; object-fit: cover; border-radius: 4px; }
        .menu-item h3 { color: #D4AF37; margin: 10px 0; }
        .menu-item .price { color: #4CAF50; font-size: 1.3em; font-weight: bold; }
        .menu-item .category { background: #D4AF37; color: white; padding: 5px 10px; border-radius: 4px; display: inline-block; font-size: 0.8em; }
        pre { background: #222; color: #0f0; padding: 10px; border-radius: 4px; overflow-x: auto; }
        input { padding: 10px; margin: 5px; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üçù Menu API Tester</h1>
    <p>Test your menu endpoints</p>

    <!-- GET ALL ITEMS -->
    <div class="section">
        <h2>1Ô∏è‚É£ Get All Menu Items</h2>
        <button onclick="getAllItems()">Get All Items</button>
        <div id="allItemsResult"></div>
    </div>

    <!-- GET CATEGORIES -->
    <div class="section">
        <h2>2Ô∏è‚É£ Get All Categories</h2>
        <button onclick="getCategories()">Get Categories</button>
        <div id="categoriesResult"></div>
    </div>

    <!-- GET BY CATEGORY -->
    <div class="section">
        <h2>3Ô∏è‚É£ Get Items by Category</h2>
        <button onclick="getByCategory('pasta')">Pasta</button>
        <button onclick="getByCategory('pizza')">Pizza</button>
        <button onclick="getByCategory('mains')">Mains</button>
        <button onclick="getByCategory('desserts')">Desserts</button>
        <div id="categoryResult"></div>
    </div>

    <!-- GET BY ID -->
    <div class="section">
        <h2>4Ô∏è‚É£ Get Item by ID</h2>
        <input type="number" id="itemId" placeholder="Item ID" value="1">
        <button onclick="getById()">Get Item</button>
        <div id="byIdResult"></div>
    </div>

    <script>
        const API_URL = 'http://localhost:3000/api/menu';

        // Display menu items in a grid
        function displayMenuItems(items, containerId) {
            const container = document.getElementById(containerId);
            const html = `
                <div class="menu-grid">
                    ${items.map(item => `
                        <div class="menu-item">
                            <img src="${item.image_url}" alt="${item.name}">
                            <span class="category">${item.category}</span>
                            <h3>${item.name}</h3>
                            <p>${item.description.substring(0, 100)}...</p>
                            <div class="price">$${item.price.toFixed(2)}</div>
                            <p><small>ID: ${item.id}</small></p>
                        </div>
                    `).join('')}
                </div>
            `;
            container.innerHTML = html;
        }

        // GET ALL ITEMS
        async function getAllItems() {
            const resultDiv = document.getElementById('allItemsResult');
            resultDiv.innerHTML = '<p>‚è≥ Loading...</p>';

            try {
                const response = await fetch(API_URL);
                const result = await response.json();
                
                if (result.success) {
                    displayMenuItems(result.items, 'allItemsResult');
                    console.log('All items:', result);
                } else {
                    resultDiv.innerHTML = `<div class="result"><p>‚ùå Error: ${result.error}</p></div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="result"><p>‚ùå Network Error: ${error.message}</p></div>`;
            }
        }

        // GET CATEGORIES
        async function getCategories() {
            const resultDiv = document.getElementById('categoriesResult');
            resultDiv.innerHTML = '<p>‚è≥ Loading...</p>';

            try {
                const response = await fetch(`${API_URL}/categories`);
                const result = await response.json();
                
                if (result.success) {
                    resultDiv.innerHTML = `
                        <div class="result">
                            <h3>‚úÖ Found ${result.count} categories</h3>
                            <pre>${JSON.stringify(result, null, 2)}</pre>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `<div class="result"><p>‚ùå Error: ${result.error}</p></div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="result"><p>‚ùå Network Error: ${error.message}</p></div>`;
            }
        }

        // GET BY CATEGORY
        async function getByCategory(category) {
            const resultDiv = document.getElementById('categoryResult');
            resultDiv.innerHTML = '<p>‚è≥ Loading...</p>';

            try {
                const response = await fetch(`${API_URL}/category/${category}`);
                const result = await response.json();
                
                if (result.success) {
                    displayMenuItems(result.items, 'categoryResult');
                    console.log(`${category} items:`, result);
                } else {
                    resultDiv.innerHTML = `<div class="result"><p>‚ùå Error: ${result.error}</p></div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="result"><p>‚ùå Network Error: ${error.message}</p></div>`;
            }
        }

        // GET BY ID
        async function getById() {
            const resultDiv = document.getElementById('byIdResult');
            const itemId = document.getElementById('itemId').value;
            resultDiv.innerHTML = '<p>‚è≥ Loading...</p>';

            try {
                const response = await fetch(`${API_URL}/${itemId}`);
                const result = await response.json();
                
                if (result.success) {
                    displayMenuItems([result.item], 'byIdResult');
                    console.log('Item:', result);
                } else {
                    resultDiv.innerHTML = `<div class="result"><p>‚ùå Error: ${result.error}</p></div>`;
                }
            } catch (error) {
                resultDiv.innerHTML = `<div class="result"><p>‚ùå Network Error: ${error.message}</p></div>`;
            }
        }

        // Auto-load all items on page load
        window.addEventListener('DOMContentLoaded', () => {
            getAllItems();
        });
    </script>
</body>
</html>
